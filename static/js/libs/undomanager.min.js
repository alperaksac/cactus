!function(){"use strict";function a(a,b,c){return a.splice(b,!c||1+c-b+(!(c<0^b>=0)&&(c<0||-1)*a.length)),a.length}var b=function(){var f,g,b=[],c=-1,d=0,e=!1;return g=function(a,b){return a&&"function"==typeof a[b]?(e=!0,a[b](),e=!1,this):this},{add:function(g){return e?this:(b.splice(c+1,b.length-c),b.push(g),d&&b.length>d&&a(b,0,-(d+1)),c=b.length-1,f&&f(),this)},setCallback:function(a){f=a},undo:function(){var a=b[c];return a?(g(a,"undo"),c-=1,f&&f(),this):this},redo:function(){var a=b[c+1];return a?(g(a,"redo"),c+=1,f&&f(),this):this},clear:function(){var a=b.length;b=[],c=-1,f&&a>0&&f()},hasUndo:function(){return c!==-1},hasRedo:function(){return c<b.length-1},getCommands:function(){return b},getIndex:function(){return c},setLimit:function(a){d=a}}};"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return b}):"undefined"!=typeof module&&module.exports?module.exports=b:window.UndoManager=b}();